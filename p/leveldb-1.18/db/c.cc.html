<!-- generated by the src2html.pl tool from code2ebook:
  https://github.com/agentzh/code2ebook
-->

<html>
 <head>
  <title>db/c.cc - leveldb-1.18</title>
  <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
  <style>
body {
    text-align: left;
    text-align-last: left;
}

code {
    font-family: consolas, monospace;
}

span.Constant {
    color: DarkGreen;
}

span.Special {
    color: #c06000;
}

span.Comment {
    color: DarkRed;
    font-style: italic;
}

span.Identifier {
    color: DarkCyan;
}

span.PreProc {
    color: DarkMagenta;
}

span.Statement, span.Type, span.Keyword, span.Repeat, span.Conditional,
    span.Operator, span.Exception
{
    color: DarkBlue;
}

span.Todo {
    color: DarkRed;
    background-color: Gold;
    font-style: italic;
}

span.Underlined {
    text-decoration: underline;
}

span.linkable {
    font-weight: bold;
}

code ol {
    counter-reset: item;
    list-style-type: none;
    margin-left: 0;
    padding-left: 0;
    list-style-position: inside;
}

code li {
    display: block;
}

code li:before {
    content: counter(item) "  ";
    counter-increment: item;
    color: #999;
    padding-right: 0.5em;
    padding-left: 0.4em;
    list-style-position: inside;
    text-align: right
}

  </style>
 </head>
 <body>
  <h3>db/c.cc - leveldb-1.18</h3>
   <a href="../index.html"> Table of Contents </a>
 <h4>Data types defined</h4>
 <ul>
<li><a href="#L53">leveldb_cache_t</a></li>
<li><a href="#L60">leveldb_comparator_t</a></li>
<li><a href="#L127">leveldb_env_t</a></li>
<li><a href="#L58">leveldb_filelock_t</a></li>
<li><a href="#L86">leveldb_filterpolicy_t</a></li>
<li><a href="#L47">leveldb_iterator_t</a></li>
<li><a href="#L57">leveldb_logger_t</a></li>
<li><a href="#L52">leveldb_options_t</a></li>
<li><a href="#L55">leveldb_randomfile_t</a></li>
<li><a href="#L50">leveldb_readoptions_t</a></li>
<li><a href="#L54">leveldb_seqfile_t</a></li>
<li><a href="#L49">leveldb_snapshot_t</a></li>
<li><a href="#L46">leveldb_t</a></li>
<li><a href="#L56">leveldb_writablefile_t</a></li>
<li><a href="#L48">leveldb_writebatch_t</a></li>
<li><a href="#L51">leveldb_writeoptions_t</a></li>
</ul>
 <h4>Functions defined</h4>
 <ul>
<li><a href="#L73">Compare</a></li>
<li><a href="#L146">CopyString</a></li>
<li><a href="#L108">CreateFilter</a></li>
<li><a href="#L83">FindShortSuccessor</a></li>
<li><a href="#L82">FindShortestSeparator</a></li>
<li><a href="#L121">KeyMayMatch</a></li>
<li><a href="#L77">Name</a></li>
<li><a href="#L104">Name</a></li>
<li><a href="#L132">SaveError</a></li>
<li><a href="#L252">leveldb_approximate_sizes</a></li>
<li><a href="#L560">leveldb_cache_create_lru</a></li>
<li><a href="#L566">leveldb_cache_destroy</a></li>
<li><a href="#L165">leveldb_close</a></li>
<li><a href="#L267">leveldb_compact_range</a></li>
<li><a href="#L453">leveldb_comparator_create</a></li>
<li><a href="#L469">leveldb_comparator_destroy</a></li>
<li><a href="#L571">leveldb_create_default_env</a></li>
<li><a href="#L218">leveldb_create_iterator</a></li>
<li><a href="#L226">leveldb_create_snapshot</a></li>
<li><a href="#L180">leveldb_delete</a></li>
<li><a href="#L278">leveldb_destroy_db</a></li>
<li><a href="#L578">leveldb_env_destroy</a></li>
<li><a href="#L473">leveldb_filterpolicy_create</a></li>
<li><a href="#L499">leveldb_filterpolicy_create_bloom</a></li>
<li><a href="#L495">leveldb_filterpolicy_destroy</a></li>
<li><a href="#L583">leveldb_free</a></li>
<li><a href="#L197">leveldb_get</a></li>
<li><a href="#L292">leveldb_iter_destroy</a></li>
<li><a href="#L333">leveldb_iter_get_error</a></li>
<li><a href="#L321">leveldb_iter_key</a></li>
<li><a href="#L313">leveldb_iter_next</a></li>
<li><a href="#L317">leveldb_iter_prev</a></li>
<li><a href="#L309">leveldb_iter_seek</a></li>
<li><a href="#L301">leveldb_iter_seek_to_first</a></li>
<li><a href="#L305">leveldb_iter_seek_to_last</a></li>
<li><a href="#L297">leveldb_iter_valid</a></li>
<li><a href="#L327">leveldb_iter_value</a></li>
<li><a href="#L587">leveldb_major_version</a></li>
<li><a href="#L591">leveldb_minor_version</a></li>
<li><a href="#L152">leveldb_open</a></li>
<li><a href="#L386">leveldb_options_create</a></li>
<li><a href="#L390">leveldb_options_destroy</a></li>
<li><a href="#L445">leveldb_options_set_block_restart_interval</a></li>
<li><a href="#L441">leveldb_options_set_block_size</a></li>
<li><a href="#L437">leveldb_options_set_cache</a></li>
<li><a href="#L394">leveldb_options_set_comparator</a></li>
<li><a href="#L449">leveldb_options_set_compression</a></li>
<li><a href="#L406">leveldb_options_set_create_if_missing</a></li>
<li><a href="#L421">leveldb_options_set_env</a></li>
<li><a href="#L411">leveldb_options_set_error_if_exists</a></li>
<li><a href="#L400">leveldb_options_set_filter_policy</a></li>
<li><a href="#L425">leveldb_options_set_info_log</a></li>
<li><a href="#L433">leveldb_options_set_max_open_files</a></li>
<li><a href="#L416">leveldb_options_set_paranoid_checks</a></li>
<li><a href="#L429">leveldb_options_set_write_buffer_size</a></li>
<li><a href="#L240">leveldb_property_value</a></li>
<li><a href="#L170">leveldb_put</a></li>
<li><a href="#L522">leveldb_readoptions_create</a></li>
<li><a href="#L526">leveldb_readoptions_destroy</a></li>
<li><a href="#L536">leveldb_readoptions_set_fill_cache</a></li>
<li><a href="#L541">leveldb_readoptions_set_snapshot</a></li>
<li><a href="#L530">leveldb_readoptions_set_verify_checksums</a></li>
<li><a href="#L233">leveldb_release_snapshot</a></li>
<li><a href="#L285">leveldb_repair_db</a></li>
<li><a href="#L189">leveldb_write</a></li>
<li><a href="#L345">leveldb_writebatch_clear</a></li>
<li><a href="#L337">leveldb_writebatch_create</a></li>
<li><a href="#L356">leveldb_writebatch_delete</a></li>
<li><a href="#L341">leveldb_writebatch_destroy</a></li>
<li><a href="#L362">leveldb_writebatch_iterate</a></li>
<li><a href="#L349">leveldb_writebatch_put</a></li>
<li><a href="#L547">leveldb_writeoptions_create</a></li>
<li><a href="#L551">leveldb_writeoptions_destroy</a></li>
<li><a href="#L555">leveldb_writeoptions_set_sync</a></li>
<li><a href="#L69">~leveldb_comparator_t</a></li>
<li><a href="#L100">~leveldb_filterpolicy_t</a></li>
</ul>
 <h4>Source code</h4>

  <code><ol><li><span class="Comment">// Copyright (c) 2011 The LevelDB Authors. All rights reserved.<br/></li>
<li></span><span class="Comment">// Use of this source <a href="../include/leveldb/status.h.html#L84" title="include/leveldb/status.h:84">code</a> is governed by a BSD-style license that can be<br/></li>
<li></span><span class="Comment">// found in the LICENSE file. See the AUTHORS file for names of contributors.<br/></li>
<li></span><br/></li>
<li><span class="PreProc">#include </span><span class="Constant">&quot;leveldb/c.h&quot;<br/></li>
<li></span><br/></li>
<li><span class="PreProc">#include </span><span class="Constant">&lt;stdlib.h&gt;<br/></li>
<li></span><span class="PreProc">#include </span><span class="Constant">&lt;unistd.h&gt;<br/></li>
<li></span><span class="PreProc">#include </span><span class="Constant">&quot;leveldb/cache.h&quot;<br/></li>
<li></span><span class="PreProc">#include </span><span class="Constant">&quot;leveldb/comparator.h&quot;<br/></li>
<li></span><span class="PreProc">#include </span><span class="Constant">&quot;leveldb/<a href="../table/table_test.cc.html#L175" title="table/table_test.cc:175">db</a>.h&quot;<br/></li>
<li></span><span class="PreProc">#include </span><span class="Constant">&quot;leveldb/env.h&quot;<br/></li>
<li></span><span class="PreProc">#include </span><span class="Constant">&quot;leveldb/filter_policy.h&quot;<br/></li>
<li></span><span class="PreProc">#include </span><span class="Constant">&quot;leveldb/iterator.h&quot;<br/></li>
<li></span><span class="PreProc">#include </span><span class="Constant">&quot;leveldb/options.h&quot;<br/></li>
<li></span><span class="PreProc">#include </span><span class="Constant">&quot;leveldb/<a href="../table/two_level_iterator.cc.html#L45" title="table/two_level_iterator.cc:45">status</a>.h&quot;<br/></li>
<li></span><span class="PreProc">#include </span><span class="Constant">&quot;leveldb/write_batch.h&quot;<br/></li>
<li></span><br/></li>
<li><span class="Statement">using</span> leveldb::<a href="../include/leveldb/cache.h.html#L34" title="include/leveldb/cache.h:34">Cache</a>;<br/></li>
<li><span class="Statement">using</span> leveldb::<a href="skiplist_test.cc.html#L17" title="db/skiplist_test.cc:17">Comparator</a>;<br/></li>
<li><span class="Statement">using</span> leveldb::<a href="../include/leveldb/options.h.html#L23" title="include/leveldb/options.h:23">CompressionType</a>;<br/></li>
<li><span class="Statement">using</span> leveldb::<a href="../include/leveldb/db.h.html#L55" title="include/leveldb/db.h:55">DB</a>;<br/></li>
<li><span class="Statement">using</span> leveldb::<a href="../include/leveldb/env.h.html#L33" title="include/leveldb/env.h:33">Env</a>;<br/></li>
<li><span class="Statement">using</span> leveldb::<a href="../include/leveldb/env.h.html#L247" title="include/leveldb/env.h:247">FileLock</a>;<br/></li>
<li><span class="Statement">using</span> leveldb::FilterPolicy;<br/></li>
<li><span class="Statement">using</span> leveldb::<a href="../table/iterator.cc.html#L9" title="table/iterator.cc:9">Iterator</a>;<br/></li>
<li><span class="Statement">using</span> leveldb::kMajorVersion;<br/></li>
<li><span class="Statement">using</span> leveldb::kMinorVersion;<br/></li>
<li><span class="Statement">using</span> leveldb::<a href="../include/leveldb/env.h.html#L231" title="include/leveldb/env.h:231">Logger</a>;<br/></li>
<li><span class="Statement">using</span> leveldb::<a href="../util/bloom.cc.html#L91" title="util/bloom.cc:91">NewBloomFilterPolicy</a>;<br/></li>
<li><span class="Statement">using</span> leveldb::<a href="../util/cache.cc.html#L321" title="util/cache.cc:321">NewLRUCache</a>;<br/></li>
<li><span class="Statement">using</span> leveldb::<a href="../include/leveldb/options.h.html#L31" title="include/leveldb/options.h:31">Options</a>;<br/></li>
<li><span class="Statement">using</span> leveldb::<a href="../include/leveldb/env.h.html#L188" title="include/leveldb/env.h:188">RandomAccessFile</a>;<br/></li>
<li><span class="Statement">using</span> leveldb::<a href="../include/leveldb/db.h.html#L33" title="include/leveldb/db.h:33">Range</a>;<br/></li>
<li><span class="Statement">using</span> leveldb::<a href="../include/leveldb/options.h.html#L143" title="include/leveldb/options.h:143">ReadOptions</a>;<br/></li>
<li><span class="Statement">using</span> leveldb::<a href="../include/leveldb/env.h.html#L157" title="include/leveldb/env.h:157">SequentialFile</a>;<br/></li>
<li><span class="Statement">using</span> leveldb::<a href="../include/leveldb/slice.h.html#L28" title="include/leveldb/slice.h:28">Slice</a>;<br/></li>
<li><span class="Statement">using</span> leveldb::Snapshot;<br/></li>
<li><span class="Statement">using</span> leveldb::<a href="../include/leveldb/status.h.html#L24" title="include/leveldb/status.h:24">Status</a>;<br/></li>
<li><span class="Statement">using</span> leveldb::<a href="../include/leveldb/env.h.html#L214" title="include/leveldb/env.h:214">WritableFile</a>;<br/></li>
<li><span class="Statement">using</span> leveldb::<a href="write_batch.cc.html#L29" title="db/write_batch.cc:29">WriteBatch</a>;<br/></li>
<li><span class="Statement">using</span> leveldb::<a href="../include/leveldb/options.h.html#L169" title="include/leveldb/options.h:169">WriteOptions</a>;<br/></li>
<li><br/></li>
<li><span class="Type">extern</span> <span class="Constant">&quot;C&quot;</span> {<br/></li>
<li><br/></li>
<li><a id="L46">&#x200c;</a><span class="Type">struct</span> <span class="linkable">leveldb_t</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; { <a href="../include/leveldb/db.h.html#L55" title="include/leveldb/db.h:55">DB</a>*&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; rep; };<br/></li>
<li><a id="L47">&#x200c;</a><span class="Type">struct</span> <span class="linkable">leveldb_iterator_t</span>&nbsp; &nbsp;&nbsp; { <a href="../table/iterator.cc.html#L9" title="table/iterator.cc:9">Iterator</a>*&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; rep; };<br/></li>
<li><a id="L48">&#x200c;</a><span class="Type">struct</span> <span class="linkable">leveldb_writebatch_t</span>&nbsp;&nbsp; { <a href="write_batch.cc.html#L29" title="db/write_batch.cc:29">WriteBatch</a>&nbsp; &nbsp; &nbsp; &nbsp; rep; };<br/></li>
<li><a id="L49">&#x200c;</a><span class="Type">struct</span> <span class="linkable">leveldb_snapshot_t</span>&nbsp; &nbsp;&nbsp; { <span class="Type">const</span> Snapshot*&nbsp;&nbsp; rep; };<br/></li>
<li><a id="L50">&#x200c;</a><span class="Type">struct</span> <span class="linkable">leveldb_readoptions_t</span>&nbsp; { <a href="../include/leveldb/options.h.html#L143" title="include/leveldb/options.h:143">ReadOptions</a>&nbsp; &nbsp; &nbsp;&nbsp; rep; };<br/></li>
<li><a id="L51">&#x200c;</a><span class="Type">struct</span> <span class="linkable">leveldb_writeoptions_t</span> { <a href="../include/leveldb/options.h.html#L169" title="include/leveldb/options.h:169">WriteOptions</a>&nbsp; &nbsp; &nbsp; rep; };<br/></li>
<li><a id="L52">&#x200c;</a><span class="Type">struct</span> <span class="linkable">leveldb_options_t</span>&nbsp; &nbsp; &nbsp; { <a href="../include/leveldb/options.h.html#L31" title="include/leveldb/options.h:31">Options</a>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; rep; };<br/></li>
<li><a id="L53">&#x200c;</a><span class="Type">struct</span> <span class="linkable">leveldb_cache_t</span>&nbsp; &nbsp; &nbsp; &nbsp; { <a href="../include/leveldb/cache.h.html#L34" title="include/leveldb/cache.h:34">Cache</a>*&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; rep; };<br/></li>
<li><a id="L54">&#x200c;</a><span class="Type">struct</span> <span class="linkable">leveldb_seqfile_t</span>&nbsp; &nbsp; &nbsp; { <a href="../include/leveldb/env.h.html#L157" title="include/leveldb/env.h:157">SequentialFile</a>*&nbsp;&nbsp; rep; };<br/></li>
<li><a id="L55">&#x200c;</a><span class="Type">struct</span> <span class="linkable">leveldb_randomfile_t</span>&nbsp;&nbsp; { <a href="../include/leveldb/env.h.html#L188" title="include/leveldb/env.h:188">RandomAccessFile</a>* rep; };<br/></li>
<li><a id="L56">&#x200c;</a><span class="Type">struct</span> <span class="linkable">leveldb_writablefile_t</span> { <a href="../include/leveldb/env.h.html#L214" title="include/leveldb/env.h:214">WritableFile</a>*&nbsp; &nbsp;&nbsp; rep; };<br/></li>
<li><a id="L57">&#x200c;</a><span class="Type">struct</span> <span class="linkable">leveldb_logger_t</span>&nbsp; &nbsp; &nbsp;&nbsp; { <a href="../include/leveldb/env.h.html#L231" title="include/leveldb/env.h:231">Logger</a>*&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; rep; };<br/></li>
<li><a id="L58">&#x200c;</a><span class="Type">struct</span> <span class="linkable">leveldb_filelock_t</span>&nbsp; &nbsp;&nbsp; { <a href="../include/leveldb/env.h.html#L247" title="include/leveldb/env.h:247">FileLock</a>*&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; rep; };<br/></li>
<li><br/></li>
<li><a id="L60">&#x200c;</a><span class="Type">struct</span> <span class="linkable">leveldb_comparator_t</span> : <span class="Statement">public</span> <a href="skiplist_test.cc.html#L17" title="db/skiplist_test.cc:17">Comparator</a> {<br/></li>
<li>&nbsp; <span class="Type">void</span>* state_;<br/></li>
<li>&nbsp; <span class="Type">void</span> (*destructor_)(<span class="Type">void</span>*);<br/></li>
<li>&nbsp; <span class="Type">int</span> (*compare_)(<br/></li>
<li>&nbsp; &nbsp; &nbsp; <span class="Type">void</span>*,<br/></li>
<li>&nbsp; &nbsp; &nbsp; <span class="Type">const</span> <span class="Type">char</span>* a, <span class="Type">size_t</span> alen,<br/></li>
<li>&nbsp; &nbsp; &nbsp; <span class="Type">const</span> <span class="Type">char</span>* b, <span class="Type">size_t</span> blen);<br/></li>
<li>&nbsp; <span class="Type">const</span> <span class="Type">char</span>* (*name_)(<span class="Type">void</span>*);<br/></li>
<li><br/></li>
<li><a id="L69">&#x200c;</a>&nbsp; <span class="Type">virtual</span> ~<a href="#L60" title="db/c.cc:60">leveldb_comparator_t</a>() {<br/></li>
<li>&nbsp; &nbsp; (*destructor_)(state_);<br/></li>
<li>&nbsp; }<br/></li>
<li><br/></li>
<li><a id="L73">&#x200c;</a>&nbsp; <span class="Type">virtual</span> <span class="Type">int</span> <span class="linkable">Compare</span>(<span class="Type">const</span> <a href="../include/leveldb/slice.h.html#L28" title="include/leveldb/slice.h:28">Slice</a>&amp; a, <span class="Type">const</span> <a href="../include/leveldb/slice.h.html#L28" title="include/leveldb/slice.h:28">Slice</a>&amp; b) <span class="Type">const</span> {<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">return</span> (*compare_)(state_, a.<a href="../table/table_test.cc.html#L173" title="table/table_test.cc:173">data</a>(), a.<a href="../table/format.h.html#L31" title="table/format.h:31">size</a>(), b.<a href="../table/table_test.cc.html#L173" title="table/table_test.cc:173">data</a>(), b.<a href="../table/format.h.html#L31" title="table/format.h:31">size</a>());<br/></li>
<li>&nbsp; }<br/></li>
<li><br/></li>
<li><a id="L77">&#x200c;</a>&nbsp; <span class="Type">virtual</span> <span class="Type">const</span> <span class="Type">char</span>* <span class="linkable">Name</span>() <span class="Type">const</span> {<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">return</span> (*name_)(state_);<br/></li>
<li>&nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; <span class="Comment">// No-ops since the C binding does not support <a href="../table/two_level_iterator.cc.html#L37" title="table/two_level_iterator.cc:37">key</a> shortening methods.<br/></li>
<li><a id="L82">&#x200c;</a></span>&nbsp; <span class="Type">virtual</span> <span class="Type">void</span> <span class="linkable">FindShortestSeparator</span>(std::string*, <span class="Type">const</span> <a href="../include/leveldb/slice.h.html#L28" title="include/leveldb/slice.h:28">Slice</a>&amp;) <span class="Type">const</span> { }<br/></li>
<li><a id="L83">&#x200c;</a>&nbsp; <span class="Type">virtual</span> <span class="Type">void</span> <span class="linkable">FindShortSuccessor</span>(std::string* <a href="../table/two_level_iterator.cc.html#L37" title="table/two_level_iterator.cc:37">key</a>) <span class="Type">const</span> { }<br/></li>
<li>};<br/></li>
<li><br/></li>
<li><a id="L86">&#x200c;</a><span class="Type">struct</span> <span class="linkable">leveldb_filterpolicy_t</span> : <span class="Statement">public</span> FilterPolicy {<br/></li>
<li>&nbsp; <span class="Type">void</span>* state_;<br/></li>
<li>&nbsp; <span class="Type">void</span> (*destructor_)(<span class="Type">void</span>*);<br/></li>
<li>&nbsp; <span class="Type">const</span> <span class="Type">char</span>* (*name_)(<span class="Type">void</span>*);<br/></li>
<li>&nbsp; <span class="Type">char</span>* (*create_)(<br/></li>
<li>&nbsp; &nbsp; &nbsp; <span class="Type">void</span>*,<br/></li>
<li>&nbsp; &nbsp; &nbsp; <span class="Type">const</span> <span class="Type">char</span>* <span class="Type">const</span>* key_array, <span class="Type">const</span> <span class="Type">size_t</span>* key_length_array,<br/></li>
<li>&nbsp; &nbsp; &nbsp; <span class="Type">int</span> num_keys,<br/></li>
<li>&nbsp; &nbsp; &nbsp; <span class="Type">size_t</span>* filter_length);<br/></li>
<li>&nbsp; <span class="Type">unsigned</span> <span class="Type">char</span> (*key_match_)(<br/></li>
<li>&nbsp; &nbsp; &nbsp; <span class="Type">void</span>*,<br/></li>
<li>&nbsp; &nbsp; &nbsp; <span class="Type">const</span> <span class="Type">char</span>* <a href="../table/two_level_iterator.cc.html#L37" title="table/two_level_iterator.cc:37">key</a>, <span class="Type">size_t</span> length,<br/></li>
<li>&nbsp; &nbsp; &nbsp; <span class="Type">const</span> <span class="Type">char</span>* filter, <span class="Type">size_t</span> filter_length);<br/></li>
<li><br/></li>
<li><a id="L100">&#x200c;</a>&nbsp; <span class="Type">virtual</span> ~<a href="#L86" title="db/c.cc:86">leveldb_filterpolicy_t</a>() {<br/></li>
<li>&nbsp; &nbsp; (*destructor_)(state_);<br/></li>
<li>&nbsp; }<br/></li>
<li><br/></li>
<li><a id="L104">&#x200c;</a>&nbsp; <span class="Type">virtual</span> <span class="Type">const</span> <span class="Type">char</span>* <span class="linkable">Name</span>() <span class="Type">const</span> {<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">return</span> (*name_)(state_);<br/></li>
<li>&nbsp; }<br/></li>
<li><br/></li>
<li><a id="L108">&#x200c;</a>&nbsp; <span class="Type">virtual</span> <span class="Type">void</span> <span class="linkable">CreateFilter</span>(<span class="Type">const</span> <a href="../include/leveldb/slice.h.html#L28" title="include/leveldb/slice.h:28">Slice</a>* keys, <span class="Type">int</span> n, std::string* dst) <span class="Type">const</span> {<br/></li>
<li>&nbsp; &nbsp; std::vector&lt;<span class="Type">const</span> <span class="Type">char</span>*&gt; key_pointers(n);<br/></li>
<li>&nbsp; &nbsp; std::vector&lt;<span class="Type">size_t</span>&gt; key_sizes(n);<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">for</span> (<span class="Type">int</span> i = <span class="Constant">0</span>; i &lt; n; i++) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; key_pointers[i] = keys[i].<a href="../table/table_test.cc.html#L173" title="table/table_test.cc:173">data</a>();<br/></li>
<li>&nbsp; &nbsp; &nbsp; key_sizes[i] = keys[i].<a href="../table/format.h.html#L31" title="table/format.h:31">size</a>();<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li>&nbsp; &nbsp; <span class="Type">size_t</span> len;<br/></li>
<li>&nbsp; &nbsp; <span class="Type">char</span>* filter = (*create_)(state_, &amp;key_pointers[<span class="Constant">0</span>], &amp;key_sizes[<span class="Constant">0</span>], n, &amp;len);<br/></li>
<li>&nbsp; &nbsp; dst-&gt;append(filter, len);<br/></li>
<li>&nbsp; &nbsp; free(filter);<br/></li>
<li>&nbsp; }<br/></li>
<li><br/></li>
<li><a id="L121">&#x200c;</a>&nbsp; <span class="Type">virtual</span> <span class="Type">bool</span> <span class="linkable">KeyMayMatch</span>(<span class="Type">const</span> <a href="../include/leveldb/slice.h.html#L28" title="include/leveldb/slice.h:28">Slice</a>&amp; <a href="../table/two_level_iterator.cc.html#L37" title="table/two_level_iterator.cc:37">key</a>, <span class="Type">const</span> <a href="../include/leveldb/slice.h.html#L28" title="include/leveldb/slice.h:28">Slice</a>&amp; filter) <span class="Type">const</span> {<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">return</span> (*key_match_)(state_, <a href="../table/two_level_iterator.cc.html#L37" title="table/two_level_iterator.cc:37">key</a>.<a href="../table/table_test.cc.html#L173" title="table/table_test.cc:173">data</a>(), <a href="../table/two_level_iterator.cc.html#L37" title="table/two_level_iterator.cc:37">key</a>.<a href="../table/format.h.html#L31" title="table/format.h:31">size</a>(),<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; filter.<a href="../table/table_test.cc.html#L173" title="table/table_test.cc:173">data</a>(), filter.<a href="../table/format.h.html#L31" title="table/format.h:31">size</a>());<br/></li>
<li>&nbsp; }<br/></li>
<li>};<br/></li>
<li><br/></li>
<li><a id="L127">&#x200c;</a><span class="Type">struct</span> <span class="linkable">leveldb_env_t</span> {<br/></li>
<li>&nbsp; <a href="../include/leveldb/env.h.html#L33" title="include/leveldb/env.h:33">Env</a>* rep;<br/></li>
<li>&nbsp; <span class="Type">bool</span> is_default;<br/></li>
<li>};<br/></li>
<li><br/></li>
<li><a id="L132">&#x200c;</a><span class="Type">static</span> <span class="Type">bool</span> <span class="linkable">SaveError</span>(<span class="Type">char</span>** errptr, <span class="Type">const</span> <a href="../include/leveldb/status.h.html#L24" title="include/leveldb/status.h:24">Status</a>&amp; s) {<br/></li>
<li>&nbsp; assert(errptr != <span class="Constant">NULL</span>);<br/></li>
<li>&nbsp; <span class="Statement">if</span> (s.<a href="../include/leveldb/table_builder.h.html#L78" title="include/leveldb/table_builder.h:78">ok</a>()) {<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">return</span> <span class="Constant">false</span>;<br/></li>
<li>&nbsp; } <span class="Statement">else</span> <span class="Statement">if</span> (*errptr == <span class="Constant">NULL</span>) {<br/></li>
<li>&nbsp; &nbsp; *errptr = strdup(s.<a href="../table/table_test.cc.html#L587" title="table/table_test.cc:587">ToString</a>().c_str());<br/></li>
<li>&nbsp; } <span class="Statement">else</span> {<br/></li>
<li>&nbsp; &nbsp; <span class="Comment">// </span><span class="Todo">TODO</span><span class="Comment">(sanjay): <a href="db_bench.cc.html#L188" title="db/db_bench.cc:188">Merge</a> with existing error?<br/></li>
<li></span>&nbsp; &nbsp; free(*errptr);<br/></li>
<li>&nbsp; &nbsp; *errptr = strdup(s.<a href="../table/table_test.cc.html#L587" title="table/table_test.cc:587">ToString</a>().c_str());<br/></li>
<li>&nbsp; }<br/></li>
<li>&nbsp; <span class="Statement">return</span> <span class="Constant">true</span>;<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><a id="L146">&#x200c;</a><span class="Type">static</span> <span class="Type">char</span>* <span class="linkable">CopyString</span>(<span class="Type">const</span> std::string&amp; str) {<br/></li>
<li>&nbsp; <span class="Type">char</span>* result = <span class="Statement">reinterpret_cast</span>&lt;<span class="Type">char</span>*&gt;(malloc(<span class="Statement">sizeof</span>(<span class="Type">char</span>) * str.<a href="../table/format.h.html#L31" title="table/format.h:31">size</a>()));<br/></li>
<li>&nbsp; memcpy(result, str.<a href="../table/table_test.cc.html#L173" title="table/table_test.cc:173">data</a>(), <span class="Statement">sizeof</span>(<span class="Type">char</span>) * str.<a href="../table/format.h.html#L31" title="table/format.h:31">size</a>());<br/></li>
<li>&nbsp; <span class="Statement">return</span> result;<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><a id="L152">&#x200c;</a><a href="#L46" title="db/c.cc:46">leveldb_t</a>* <span class="linkable">leveldb_open</span>(<br/></li>
<li>&nbsp; &nbsp; <span class="Type">const</span> <a href="#L52" title="db/c.cc:52">leveldb_options_t</a>* options,<br/></li>
<li>&nbsp; &nbsp; <span class="Type">const</span> <span class="Type">char</span>* name,<br/></li>
<li>&nbsp; &nbsp; <span class="Type">char</span>** errptr) {<br/></li>
<li>&nbsp; <a href="../include/leveldb/db.h.html#L55" title="include/leveldb/db.h:55">DB</a>* <a href="../table/table_test.cc.html#L175" title="table/table_test.cc:175">db</a>;<br/></li>
<li>&nbsp; <span class="Statement">if</span> (<a href="../table/two_level_iterator.cc.html#L57" title="table/two_level_iterator.cc:57">SaveError</a>(errptr, <a href="../include/leveldb/db.h.html#L55" title="include/leveldb/db.h:55">DB</a>::<a href="../table/table.cc.html#L38" title="table/table.cc:38">Open</a>(options-&gt;rep, std::string(name), &amp;<a href="../table/table_test.cc.html#L175" title="table/table_test.cc:175">db</a>))) {<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">return</span> <span class="Constant">NULL</span>;<br/></li>
<li>&nbsp; }<br/></li>
<li>&nbsp; <a href="#L46" title="db/c.cc:46">leveldb_t</a>* result = <span class="Statement">new</span> <a href="#L46" title="db/c.cc:46">leveldb_t</a>;<br/></li>
<li>&nbsp; result-&gt;rep = <a href="../table/table_test.cc.html#L175" title="table/table_test.cc:175">db</a>;<br/></li>
<li>&nbsp; <span class="Statement">return</span> result;<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><a id="L165">&#x200c;</a><span class="Type">void</span> <span class="linkable">leveldb_close</span>(<a href="#L46" title="db/c.cc:46">leveldb_t</a>* <a href="../table/table_test.cc.html#L175" title="table/table_test.cc:175">db</a>) {<br/></li>
<li>&nbsp; <span class="Statement">delete</span> <a href="../table/table_test.cc.html#L175" title="table/table_test.cc:175">db</a>-&gt;rep;<br/></li>
<li>&nbsp; <span class="Statement">delete</span> <a href="../table/table_test.cc.html#L175" title="table/table_test.cc:175">db</a>;<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><a id="L170">&#x200c;</a><span class="Type">void</span> <span class="linkable">leveldb_put</span>(<br/></li>
<li>&nbsp; &nbsp; <a href="#L46" title="db/c.cc:46">leveldb_t</a>* <a href="../table/table_test.cc.html#L175" title="table/table_test.cc:175">db</a>,<br/></li>
<li>&nbsp; &nbsp; <span class="Type">const</span> <a href="#L51" title="db/c.cc:51">leveldb_writeoptions_t</a>* options,<br/></li>
<li>&nbsp; &nbsp; <span class="Type">const</span> <span class="Type">char</span>* <a href="../table/two_level_iterator.cc.html#L37" title="table/two_level_iterator.cc:37">key</a>, <span class="Type">size_t</span> keylen,<br/></li>
<li>&nbsp; &nbsp; <span class="Type">const</span> <span class="Type">char</span>* val, <span class="Type">size_t</span> vallen,<br/></li>
<li>&nbsp; &nbsp; <span class="Type">char</span>** errptr) {<br/></li>
<li>&nbsp; <a href="../table/two_level_iterator.cc.html#L57" title="table/two_level_iterator.cc:57">SaveError</a>(errptr,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="../table/table_test.cc.html#L175" title="table/table_test.cc:175">db</a>-&gt;rep-&gt;<a href="write_batch.cc.html#L98" title="db/write_batch.cc:98">Put</a>(options-&gt;rep, <a href="../include/leveldb/slice.h.html#L28" title="include/leveldb/slice.h:28">Slice</a>(<a href="../table/two_level_iterator.cc.html#L37" title="table/two_level_iterator.cc:37">key</a>, keylen), <a href="../include/leveldb/slice.h.html#L28" title="include/leveldb/slice.h:28">Slice</a>(val, vallen)));<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><a id="L180">&#x200c;</a><span class="Type">void</span> <span class="linkable">leveldb_delete</span>(<br/></li>
<li>&nbsp; &nbsp; <a href="#L46" title="db/c.cc:46">leveldb_t</a>* <a href="../table/table_test.cc.html#L175" title="table/table_test.cc:175">db</a>,<br/></li>
<li>&nbsp; &nbsp; <span class="Type">const</span> <a href="#L51" title="db/c.cc:51">leveldb_writeoptions_t</a>* options,<br/></li>
<li>&nbsp; &nbsp; <span class="Type">const</span> <span class="Type">char</span>* <a href="../table/two_level_iterator.cc.html#L37" title="table/two_level_iterator.cc:37">key</a>, <span class="Type">size_t</span> keylen,<br/></li>
<li>&nbsp; &nbsp; <span class="Type">char</span>** errptr) {<br/></li>
<li>&nbsp; <a href="../table/two_level_iterator.cc.html#L57" title="table/two_level_iterator.cc:57">SaveError</a>(errptr, <a href="../table/table_test.cc.html#L175" title="table/table_test.cc:175">db</a>-&gt;rep-&gt;<a href="write_batch.cc.html#L105" title="db/write_batch.cc:105">Delete</a>(options-&gt;rep, <a href="../include/leveldb/slice.h.html#L28" title="include/leveldb/slice.h:28">Slice</a>(<a href="../table/two_level_iterator.cc.html#L37" title="table/two_level_iterator.cc:37">key</a>, keylen)));<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><br/></li>
<li><a id="L189">&#x200c;</a><span class="Type">void</span> <span class="linkable">leveldb_write</span>(<br/></li>
<li>&nbsp; &nbsp; <a href="#L46" title="db/c.cc:46">leveldb_t</a>* <a href="../table/table_test.cc.html#L175" title="table/table_test.cc:175">db</a>,<br/></li>
<li>&nbsp; &nbsp; <span class="Type">const</span> <a href="#L51" title="db/c.cc:51">leveldb_writeoptions_t</a>* options,<br/></li>
<li>&nbsp; &nbsp; <a href="#L48" title="db/c.cc:48">leveldb_writebatch_t</a>* batch,<br/></li>
<li>&nbsp; &nbsp; <span class="Type">char</span>** errptr) {<br/></li>
<li>&nbsp; <a href="../table/two_level_iterator.cc.html#L57" title="table/two_level_iterator.cc:57">SaveError</a>(errptr, <a href="../table/table_test.cc.html#L175" title="table/table_test.cc:175">db</a>-&gt;rep-&gt;<a href="log_test.cc.html#L121" title="db/log_test.cc:121">Write</a>(options-&gt;rep, &amp;batch-&gt;rep));<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><a id="L197">&#x200c;</a><span class="Type">char</span>* <span class="linkable">leveldb_get</span>(<br/></li>
<li>&nbsp; &nbsp; <a href="#L46" title="db/c.cc:46">leveldb_t</a>* <a href="../table/table_test.cc.html#L175" title="table/table_test.cc:175">db</a>,<br/></li>
<li>&nbsp; &nbsp; <span class="Type">const</span> <a href="#L50" title="db/c.cc:50">leveldb_readoptions_t</a>* options,<br/></li>
<li>&nbsp; &nbsp; <span class="Type">const</span> <span class="Type">char</span>* <a href="../table/two_level_iterator.cc.html#L37" title="table/two_level_iterator.cc:37">key</a>, <span class="Type">size_t</span> keylen,<br/></li>
<li>&nbsp; &nbsp; <span class="Type">size_t</span>* vallen,<br/></li>
<li>&nbsp; &nbsp; <span class="Type">char</span>** errptr) {<br/></li>
<li>&nbsp; <span class="Type">char</span>* result = <span class="Constant">NULL</span>;<br/></li>
<li>&nbsp; std::string tmp;<br/></li>
<li>&nbsp; <a href="../include/leveldb/status.h.html#L24" title="include/leveldb/status.h:24">Status</a> s = <a href="../table/table_test.cc.html#L175" title="table/table_test.cc:175">db</a>-&gt;rep-&gt;<a href="version_set.cc.html#L323" title="db/version_set.cc:323">Get</a>(options-&gt;rep, <a href="../include/leveldb/slice.h.html#L28" title="include/leveldb/slice.h:28">Slice</a>(<a href="../table/two_level_iterator.cc.html#L37" title="table/two_level_iterator.cc:37">key</a>, keylen), &amp;tmp);<br/></li>
<li>&nbsp; <span class="Statement">if</span> (s.<a href="../include/leveldb/table_builder.h.html#L78" title="include/leveldb/table_builder.h:78">ok</a>()) {<br/></li>
<li>&nbsp; &nbsp; *vallen = tmp.<a href="../table/format.h.html#L31" title="table/format.h:31">size</a>();<br/></li>
<li>&nbsp; &nbsp; result = <a href="#L146" title="db/c.cc:146">CopyString</a>(tmp);<br/></li>
<li>&nbsp; } <span class="Statement">else</span> {<br/></li>
<li>&nbsp; &nbsp; *vallen = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (!s.<a href="../include/leveldb/status.h.html#L55" title="include/leveldb/status.h:55">IsNotFound</a>()) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; <a href="../table/two_level_iterator.cc.html#L57" title="table/two_level_iterator.cc:57">SaveError</a>(errptr, s);<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li>&nbsp; }<br/></li>
<li>&nbsp; <span class="Statement">return</span> result;<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><a id="L218">&#x200c;</a><a href="#L47" title="db/c.cc:47">leveldb_iterator_t</a>* <span class="linkable">leveldb_create_iterator</span>(<br/></li>
<li>&nbsp; &nbsp; <a href="#L46" title="db/c.cc:46">leveldb_t</a>* <a href="../table/table_test.cc.html#L175" title="table/table_test.cc:175">db</a>,<br/></li>
<li>&nbsp; &nbsp; <span class="Type">const</span> <a href="#L50" title="db/c.cc:50">leveldb_readoptions_t</a>* options) {<br/></li>
<li>&nbsp; <a href="#L47" title="db/c.cc:47">leveldb_iterator_t</a>* result = <span class="Statement">new</span> <a href="#L47" title="db/c.cc:47">leveldb_iterator_t</a>;<br/></li>
<li>&nbsp; result-&gt;rep = <a href="../table/table_test.cc.html#L175" title="table/table_test.cc:175">db</a>-&gt;rep-&gt;<a href="../table/table_test.cc.html#L209" title="table/table_test.cc:209">NewIterator</a>(options-&gt;rep);<br/></li>
<li>&nbsp; <span class="Statement">return</span> result;<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><a id="L226">&#x200c;</a><span class="Type">const</span> <a href="#L49" title="db/c.cc:49">leveldb_snapshot_t</a>* <span class="linkable">leveldb_create_snapshot</span>(<br/></li>
<li>&nbsp; &nbsp; <a href="#L46" title="db/c.cc:46">leveldb_t</a>* <a href="../table/table_test.cc.html#L175" title="table/table_test.cc:175">db</a>) {<br/></li>
<li>&nbsp; <a href="#L49" title="db/c.cc:49">leveldb_snapshot_t</a>* result = <span class="Statement">new</span> <a href="#L49" title="db/c.cc:49">leveldb_snapshot_t</a>;<br/></li>
<li>&nbsp; result-&gt;rep = <a href="../table/table_test.cc.html#L175" title="table/table_test.cc:175">db</a>-&gt;rep-&gt;<a href="db_impl.cc.html#L1143" title="db/db_impl.cc:1143">GetSnapshot</a>();<br/></li>
<li>&nbsp; <span class="Statement">return</span> result;<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><a id="L233">&#x200c;</a><span class="Type">void</span> <span class="linkable">leveldb_release_snapshot</span>(<br/></li>
<li>&nbsp; &nbsp; <a href="#L46" title="db/c.cc:46">leveldb_t</a>* <a href="../table/table_test.cc.html#L175" title="table/table_test.cc:175">db</a>,<br/></li>
<li>&nbsp; &nbsp; <span class="Type">const</span> <a href="#L49" title="db/c.cc:49">leveldb_snapshot_t</a>* snapshot) {<br/></li>
<li>&nbsp; <a href="../table/table_test.cc.html#L175" title="table/table_test.cc:175">db</a>-&gt;rep-&gt;<a href="db_impl.cc.html#L1148" title="db/db_impl.cc:1148">ReleaseSnapshot</a>(snapshot-&gt;rep);<br/></li>
<li>&nbsp; <span class="Statement">delete</span> snapshot;<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><a id="L240">&#x200c;</a><span class="Type">char</span>* <span class="linkable">leveldb_property_value</span>(<br/></li>
<li>&nbsp; &nbsp; <a href="#L46" title="db/c.cc:46">leveldb_t</a>* <a href="../table/table_test.cc.html#L175" title="table/table_test.cc:175">db</a>,<br/></li>
<li>&nbsp; &nbsp; <span class="Type">const</span> <span class="Type">char</span>* propname) {<br/></li>
<li>&nbsp; std::string tmp;<br/></li>
<li>&nbsp; <span class="Statement">if</span> (<a href="../table/table_test.cc.html#L175" title="table/table_test.cc:175">db</a>-&gt;rep-&gt;<a href="db_impl.cc.html#L1349" title="db/db_impl.cc:1349">GetProperty</a>(<a href="../include/leveldb/slice.h.html#L28" title="include/leveldb/slice.h:28">Slice</a>(propname), &amp;tmp)) {<br/></li>
<li>&nbsp; &nbsp; <span class="Comment">// We use strdup() since we expect human readable output.<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">return</span> strdup(tmp.c_str());<br/></li>
<li>&nbsp; } <span class="Statement">else</span> {<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">return</span> <span class="Constant">NULL</span>;<br/></li>
<li>&nbsp; }<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><a id="L252">&#x200c;</a><span class="Type">void</span> <span class="linkable">leveldb_approximate_sizes</span>(<br/></li>
<li>&nbsp; &nbsp; <a href="#L46" title="db/c.cc:46">leveldb_t</a>* <a href="../table/table_test.cc.html#L175" title="table/table_test.cc:175">db</a>,<br/></li>
<li>&nbsp; &nbsp; <span class="Type">int</span> num_ranges,<br/></li>
<li>&nbsp; &nbsp; <span class="Type">const</span> <span class="Type">char</span>* <span class="Type">const</span>* range_start_key, <span class="Type">const</span> <span class="Type">size_t</span>* range_start_key_len,<br/></li>
<li>&nbsp; &nbsp; <span class="Type">const</span> <span class="Type">char</span>* <span class="Type">const</span>* range_limit_key, <span class="Type">const</span> <span class="Type">size_t</span>* range_limit_key_len,<br/></li>
<li>&nbsp; &nbsp; <span class="Type"><a href="../port/win/stdint.h.html#L22" title="port/win/stdint.h:22">uint64_t</a></span>* sizes) {<br/></li>
<li>&nbsp; <a href="../include/leveldb/db.h.html#L33" title="include/leveldb/db.h:33">Range</a>* ranges = <span class="Statement">new</span> <a href="../include/leveldb/db.h.html#L33" title="include/leveldb/db.h:33">Range</a>[num_ranges];<br/></li>
<li>&nbsp; <span class="Statement">for</span> (<span class="Type">int</span> i = <span class="Constant">0</span>; i &lt; num_ranges; i++) {<br/></li>
<li>&nbsp; &nbsp; ranges[i].start = <a href="../include/leveldb/slice.h.html#L28" title="include/leveldb/slice.h:28">Slice</a>(range_start_key[i], range_start_key_len[i]);<br/></li>
<li>&nbsp; &nbsp; ranges[i].limit = <a href="../include/leveldb/slice.h.html#L28" title="include/leveldb/slice.h:28">Slice</a>(range_limit_key[i], range_limit_key_len[i]);<br/></li>
<li>&nbsp; }<br/></li>
<li>&nbsp; <a href="../table/table_test.cc.html#L175" title="table/table_test.cc:175">db</a>-&gt;rep-&gt;<a href="db_impl.cc.html#L1403" title="db/db_impl.cc:1403">GetApproximateSizes</a>(ranges, num_ranges, sizes);<br/></li>
<li>&nbsp; <span class="Statement">delete</span>[] ranges;<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><a id="L267">&#x200c;</a><span class="Type">void</span> <span class="linkable">leveldb_compact_range</span>(<br/></li>
<li>&nbsp; &nbsp; <a href="#L46" title="db/c.cc:46">leveldb_t</a>* <a href="../table/table_test.cc.html#L175" title="table/table_test.cc:175">db</a>,<br/></li>
<li>&nbsp; &nbsp; <span class="Type">const</span> <span class="Type">char</span>* start_key, <span class="Type">size_t</span> start_key_len,<br/></li>
<li>&nbsp; &nbsp; <span class="Type">const</span> <span class="Type">char</span>* limit_key, <span class="Type">size_t</span> limit_key_len) {<br/></li>
<li>&nbsp; <a href="../include/leveldb/slice.h.html#L28" title="include/leveldb/slice.h:28">Slice</a> a, b;<br/></li>
<li>&nbsp; <a href="../table/table_test.cc.html#L175" title="table/table_test.cc:175">db</a>-&gt;rep-&gt;<a href="version_set.cc.html#L1364" title="db/version_set.cc:1364">CompactRange</a>(<br/></li>
<li>&nbsp; &nbsp; &nbsp; <span class="Comment">// Pass NULL <a href="../include/leveldb/slice.h.html#L28" title="include/leveldb/slice.h:28">Slice</a> if corresponding &quot;const char*&quot; is NULL<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; (start_key ? (a = <a href="../include/leveldb/slice.h.html#L28" title="include/leveldb/slice.h:28">Slice</a>(start_key, start_key_len), &amp;a) : <span class="Constant">NULL</span>),<br/></li>
<li>&nbsp; &nbsp; &nbsp; (limit_key ? (b = <a href="../include/leveldb/slice.h.html#L28" title="include/leveldb/slice.h:28">Slice</a>(limit_key, limit_key_len), &amp;b) : <span class="Constant">NULL</span>));<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><a id="L278">&#x200c;</a><span class="Type">void</span> <span class="linkable">leveldb_destroy_db</span>(<br/></li>
<li>&nbsp; &nbsp; <span class="Type">const</span> <a href="#L52" title="db/c.cc:52">leveldb_options_t</a>* options,<br/></li>
<li>&nbsp; &nbsp; <span class="Type">const</span> <span class="Type">char</span>* name,<br/></li>
<li>&nbsp; &nbsp; <span class="Type">char</span>** errptr) {<br/></li>
<li>&nbsp; <a href="../table/two_level_iterator.cc.html#L57" title="table/two_level_iterator.cc:57">SaveError</a>(errptr, <a href="db_impl.cc.html#L1482" title="db/db_impl.cc:1482">DestroyDB</a>(name, options-&gt;rep));<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><a id="L285">&#x200c;</a><span class="Type">void</span> <span class="linkable">leveldb_repair_db</span>(<br/></li>
<li>&nbsp; &nbsp; <span class="Type">const</span> <a href="#L52" title="db/c.cc:52">leveldb_options_t</a>* options,<br/></li>
<li>&nbsp; &nbsp; <span class="Type">const</span> <span class="Type">char</span>* name,<br/></li>
<li>&nbsp; &nbsp; <span class="Type">char</span>** errptr) {<br/></li>
<li>&nbsp; <a href="../table/two_level_iterator.cc.html#L57" title="table/two_level_iterator.cc:57">SaveError</a>(errptr, <a href="corruption_test.cc.html#L64" title="db/corruption_test.cc:64">RepairDB</a>(name, options-&gt;rep));<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><a id="L292">&#x200c;</a><span class="Type">void</span> <span class="linkable">leveldb_iter_destroy</span>(<a href="#L47" title="db/c.cc:47">leveldb_iterator_t</a>* <a href="../table/iterator_wrapper.h.html#L21" title="table/iterator_wrapper.h:21">iter</a>) {<br/></li>
<li>&nbsp; <span class="Statement">delete</span> <a href="../table/iterator_wrapper.h.html#L21" title="table/iterator_wrapper.h:21">iter</a>-&gt;rep;<br/></li>
<li>&nbsp; <span class="Statement">delete</span> <a href="../table/iterator_wrapper.h.html#L21" title="table/iterator_wrapper.h:21">iter</a>;<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><a id="L297">&#x200c;</a><span class="Type">unsigned</span> <span class="Type">char</span> <span class="linkable">leveldb_iter_valid</span>(<span class="Type">const</span> <a href="#L47" title="db/c.cc:47">leveldb_iterator_t</a>* <a href="../table/iterator_wrapper.h.html#L21" title="table/iterator_wrapper.h:21">iter</a>) {<br/></li>
<li>&nbsp; <span class="Statement">return</span> <a href="../table/iterator_wrapper.h.html#L21" title="table/iterator_wrapper.h:21">iter</a>-&gt;rep-&gt;<a href="../table/two_level_iterator.cc.html#L34" title="table/two_level_iterator.cc:34">Valid</a>();<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><a id="L301">&#x200c;</a><span class="Type">void</span> <span class="linkable">leveldb_iter_seek_to_first</span>(<a href="#L47" title="db/c.cc:47">leveldb_iterator_t</a>* <a href="../table/iterator_wrapper.h.html#L21" title="table/iterator_wrapper.h:21">iter</a>) {<br/></li>
<li>&nbsp; <a href="../table/iterator_wrapper.h.html#L21" title="table/iterator_wrapper.h:21">iter</a>-&gt;rep-&gt;<a href="../table/two_level_iterator.cc.html#L98" title="table/two_level_iterator.cc:98">SeekToFirst</a>();<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><a id="L305">&#x200c;</a><span class="Type">void</span> <span class="linkable">leveldb_iter_seek_to_last</span>(<a href="#L47" title="db/c.cc:47">leveldb_iterator_t</a>* <a href="../table/iterator_wrapper.h.html#L21" title="table/iterator_wrapper.h:21">iter</a>) {<br/></li>
<li>&nbsp; <a href="../table/iterator_wrapper.h.html#L21" title="table/iterator_wrapper.h:21">iter</a>-&gt;rep-&gt;<a href="../table/two_level_iterator.cc.html#L105" title="table/two_level_iterator.cc:105">SeekToLast</a>();<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><a id="L309">&#x200c;</a><span class="Type">void</span> <span class="linkable">leveldb_iter_seek</span>(<a href="#L47" title="db/c.cc:47">leveldb_iterator_t</a>* <a href="../table/iterator_wrapper.h.html#L21" title="table/iterator_wrapper.h:21">iter</a>, <span class="Type">const</span> <span class="Type">char</span>* k, <span class="Type">size_t</span> klen) {<br/></li>
<li>&nbsp; <a href="../table/iterator_wrapper.h.html#L21" title="table/iterator_wrapper.h:21">iter</a>-&gt;rep-&gt;<a href="../table/two_level_iterator.cc.html#L91" title="table/two_level_iterator.cc:91">Seek</a>(<a href="../include/leveldb/slice.h.html#L28" title="include/leveldb/slice.h:28">Slice</a>(k, klen));<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><a id="L313">&#x200c;</a><span class="Type">void</span> <span class="linkable">leveldb_iter_next</span>(<a href="#L47" title="db/c.cc:47">leveldb_iterator_t</a>* <a href="../table/iterator_wrapper.h.html#L21" title="table/iterator_wrapper.h:21">iter</a>) {<br/></li>
<li>&nbsp; <a href="../table/iterator_wrapper.h.html#L21" title="table/iterator_wrapper.h:21">iter</a>-&gt;rep-&gt;<a href="../table/two_level_iterator.cc.html#L112" title="table/two_level_iterator.cc:112">Next</a>();<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><a id="L317">&#x200c;</a><span class="Type">void</span> <span class="linkable">leveldb_iter_prev</span>(<a href="#L47" title="db/c.cc:47">leveldb_iterator_t</a>* <a href="../table/iterator_wrapper.h.html#L21" title="table/iterator_wrapper.h:21">iter</a>) {<br/></li>
<li>&nbsp; <a href="../table/iterator_wrapper.h.html#L21" title="table/iterator_wrapper.h:21">iter</a>-&gt;rep-&gt;<a href="../table/two_level_iterator.cc.html#L118" title="table/two_level_iterator.cc:118">Prev</a>();<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><a id="L321">&#x200c;</a><span class="Type">const</span> <span class="Type">char</span>* <span class="linkable">leveldb_iter_key</span>(<span class="Type">const</span> <a href="#L47" title="db/c.cc:47">leveldb_iterator_t</a>* <a href="../table/iterator_wrapper.h.html#L21" title="table/iterator_wrapper.h:21">iter</a>, <span class="Type">size_t</span>* klen) {<br/></li>
<li>&nbsp; <a href="../include/leveldb/slice.h.html#L28" title="include/leveldb/slice.h:28">Slice</a> s = <a href="../table/iterator_wrapper.h.html#L21" title="table/iterator_wrapper.h:21">iter</a>-&gt;rep-&gt;<a href="../table/two_level_iterator.cc.html#L37" title="table/two_level_iterator.cc:37">key</a>();<br/></li>
<li>&nbsp; *klen = s.<a href="../table/format.h.html#L31" title="table/format.h:31">size</a>();<br/></li>
<li>&nbsp; <span class="Statement">return</span> s.<a href="../table/table_test.cc.html#L173" title="table/table_test.cc:173">data</a>();<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><a id="L327">&#x200c;</a><span class="Type">const</span> <span class="Type">char</span>* <span class="linkable">leveldb_iter_value</span>(<span class="Type">const</span> <a href="#L47" title="db/c.cc:47">leveldb_iterator_t</a>* <a href="../table/iterator_wrapper.h.html#L21" title="table/iterator_wrapper.h:21">iter</a>, <span class="Type">size_t</span>* vlen) {<br/></li>
<li>&nbsp; <a href="../include/leveldb/slice.h.html#L28" title="include/leveldb/slice.h:28">Slice</a> s = <a href="../table/iterator_wrapper.h.html#L21" title="table/iterator_wrapper.h:21">iter</a>-&gt;rep-&gt;<a href="../table/two_level_iterator.cc.html#L41" title="table/two_level_iterator.cc:41">value</a>();<br/></li>
<li>&nbsp; *vlen = s.<a href="../table/format.h.html#L31" title="table/format.h:31">size</a>();<br/></li>
<li>&nbsp; <span class="Statement">return</span> s.<a href="../table/table_test.cc.html#L173" title="table/table_test.cc:173">data</a>();<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><a id="L333">&#x200c;</a><span class="Type">void</span> <span class="linkable">leveldb_iter_get_error</span>(<span class="Type">const</span> <a href="#L47" title="db/c.cc:47">leveldb_iterator_t</a>* <a href="../table/iterator_wrapper.h.html#L21" title="table/iterator_wrapper.h:21">iter</a>, <span class="Type">char</span>** errptr) {<br/></li>
<li>&nbsp; <a href="../table/two_level_iterator.cc.html#L57" title="table/two_level_iterator.cc:57">SaveError</a>(errptr, <a href="../table/iterator_wrapper.h.html#L21" title="table/iterator_wrapper.h:21">iter</a>-&gt;rep-&gt;<a href="../table/two_level_iterator.cc.html#L45" title="table/two_level_iterator.cc:45">status</a>());<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><a id="L337">&#x200c;</a><a href="#L48" title="db/c.cc:48">leveldb_writebatch_t</a>* <span class="linkable">leveldb_writebatch_create</span>() {<br/></li>
<li>&nbsp; <span class="Statement">return</span> <span class="Statement">new</span> <a href="#L48" title="db/c.cc:48">leveldb_writebatch_t</a>;<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><a id="L341">&#x200c;</a><span class="Type">void</span> <span class="linkable">leveldb_writebatch_destroy</span>(<a href="#L48" title="db/c.cc:48">leveldb_writebatch_t</a>* b) {<br/></li>
<li>&nbsp; <span class="Statement">delete</span> b;<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><a id="L345">&#x200c;</a><span class="Type">void</span> <span class="linkable">leveldb_writebatch_clear</span>(<a href="#L48" title="db/c.cc:48">leveldb_writebatch_t</a>* b) {<br/></li>
<li>&nbsp; b-&gt;rep.<a href="write_batch.cc.html#L37" title="db/write_batch.cc:37">Clear</a>();<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><a id="L349">&#x200c;</a><span class="Type">void</span> <span class="linkable">leveldb_writebatch_put</span>(<br/></li>
<li>&nbsp; &nbsp; <a href="#L48" title="db/c.cc:48">leveldb_writebatch_t</a>* b,<br/></li>
<li>&nbsp; &nbsp; <span class="Type">const</span> <span class="Type">char</span>* <a href="../table/two_level_iterator.cc.html#L37" title="table/two_level_iterator.cc:37">key</a>, <span class="Type">size_t</span> klen,<br/></li>
<li>&nbsp; &nbsp; <span class="Type">const</span> <span class="Type">char</span>* val, <span class="Type">size_t</span> vlen) {<br/></li>
<li>&nbsp; b-&gt;rep.<a href="write_batch.cc.html#L98" title="db/write_batch.cc:98">Put</a>(<a href="../include/leveldb/slice.h.html#L28" title="include/leveldb/slice.h:28">Slice</a>(<a href="../table/two_level_iterator.cc.html#L37" title="table/two_level_iterator.cc:37">key</a>, klen), <a href="../include/leveldb/slice.h.html#L28" title="include/leveldb/slice.h:28">Slice</a>(val, vlen));<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><a id="L356">&#x200c;</a><span class="Type">void</span> <span class="linkable">leveldb_writebatch_delete</span>(<br/></li>
<li>&nbsp; &nbsp; <a href="#L48" title="db/c.cc:48">leveldb_writebatch_t</a>* b,<br/></li>
<li>&nbsp; &nbsp; <span class="Type">const</span> <span class="Type">char</span>* <a href="../table/two_level_iterator.cc.html#L37" title="table/two_level_iterator.cc:37">key</a>, <span class="Type">size_t</span> klen) {<br/></li>
<li>&nbsp; b-&gt;rep.<a href="write_batch.cc.html#L105" title="db/write_batch.cc:105">Delete</a>(<a href="../include/leveldb/slice.h.html#L28" title="include/leveldb/slice.h:28">Slice</a>(<a href="../table/two_level_iterator.cc.html#L37" title="table/two_level_iterator.cc:37">key</a>, klen));<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><a id="L362">&#x200c;</a><span class="Type">void</span> <span class="linkable">leveldb_writebatch_iterate</span>(<br/></li>
<li>&nbsp; &nbsp; <a href="#L48" title="db/c.cc:48">leveldb_writebatch_t</a>* b,<br/></li>
<li>&nbsp; &nbsp; <span class="Type">void</span>* state,<br/></li>
<li>&nbsp; &nbsp; <span class="Type">void</span> (*put)(<span class="Type">void</span>*, <span class="Type">const</span> <span class="Type">char</span>* k, <span class="Type">size_t</span> klen, <span class="Type">const</span> <span class="Type">char</span>* v, <span class="Type">size_t</span> vlen),<br/></li>
<li>&nbsp; &nbsp; <span class="Type">void</span> (*deleted)(<span class="Type">void</span>*, <span class="Type">const</span> <span class="Type">char</span>* k, <span class="Type">size_t</span> klen)) {<br/></li>
<li>&nbsp; <span class="Type">class</span> H : <span class="Statement">public</span> <a href="write_batch.cc.html#L29" title="db/write_batch.cc:29">WriteBatch</a>::Handler {<br/></li>
<li><span class="cUserCont">&nbsp;&nbsp; </span><span class="Statement">public</span><span class="cUserCont">:<br/></li>
<li></span>&nbsp; &nbsp; <span class="Type">void</span>* state_;<br/></li>
<li>&nbsp; &nbsp; <span class="Type">void</span> (*put_)(<span class="Type">void</span>*, <span class="Type">const</span> <span class="Type">char</span>* k, <span class="Type">size_t</span> klen, <span class="Type">const</span> <span class="Type">char</span>* v, <span class="Type">size_t</span> vlen);<br/></li>
<li>&nbsp; &nbsp; <span class="Type">void</span> (*deleted_)(<span class="Type">void</span>*, <span class="Type">const</span> <span class="Type">char</span>* k, <span class="Type">size_t</span> klen);<br/></li>
<li>&nbsp; &nbsp; <span class="Type">virtual</span> <span class="Type">void</span> <a href="write_batch.cc.html#L98" title="db/write_batch.cc:98">Put</a>(<span class="Type">const</span> <a href="../include/leveldb/slice.h.html#L28" title="include/leveldb/slice.h:28">Slice</a>&amp; <a href="../table/two_level_iterator.cc.html#L37" title="table/two_level_iterator.cc:37">key</a>, <span class="Type">const</span> <a href="../include/leveldb/slice.h.html#L28" title="include/leveldb/slice.h:28">Slice</a>&amp; <a href="../table/two_level_iterator.cc.html#L41" title="table/two_level_iterator.cc:41">value</a>) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; (*put_)(state_, <a href="../table/two_level_iterator.cc.html#L37" title="table/two_level_iterator.cc:37">key</a>.<a href="../table/table_test.cc.html#L173" title="table/table_test.cc:173">data</a>(), <a href="../table/two_level_iterator.cc.html#L37" title="table/two_level_iterator.cc:37">key</a>.<a href="../table/format.h.html#L31" title="table/format.h:31">size</a>(), <a href="../table/two_level_iterator.cc.html#L41" title="table/two_level_iterator.cc:41">value</a>.<a href="../table/table_test.cc.html#L173" title="table/table_test.cc:173">data</a>(), <a href="../table/two_level_iterator.cc.html#L41" title="table/two_level_iterator.cc:41">value</a>.<a href="../table/format.h.html#L31" title="table/format.h:31">size</a>());<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li>&nbsp; &nbsp; <span class="Type">virtual</span> <span class="Type">void</span> <a href="write_batch.cc.html#L105" title="db/write_batch.cc:105">Delete</a>(<span class="Type">const</span> <a href="../include/leveldb/slice.h.html#L28" title="include/leveldb/slice.h:28">Slice</a>&amp; <a href="../table/two_level_iterator.cc.html#L37" title="table/two_level_iterator.cc:37">key</a>) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; (*deleted_)(state_, <a href="../table/two_level_iterator.cc.html#L37" title="table/two_level_iterator.cc:37">key</a>.<a href="../table/table_test.cc.html#L173" title="table/table_test.cc:173">data</a>(), <a href="../table/two_level_iterator.cc.html#L37" title="table/two_level_iterator.cc:37">key</a>.<a href="../table/format.h.html#L31" title="table/format.h:31">size</a>());<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li>&nbsp; };<br/></li>
<li>&nbsp; H handler;<br/></li>
<li>&nbsp; handler.state_ = state;<br/></li>
<li>&nbsp; handler.put_ = put;<br/></li>
<li>&nbsp; handler.deleted_ = deleted;<br/></li>
<li>&nbsp; b-&gt;rep.<a href="write_batch.cc.html#L42" title="db/write_batch.cc:42">Iterate</a>(&amp;handler);<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><a id="L386">&#x200c;</a><a href="#L52" title="db/c.cc:52">leveldb_options_t</a>* <span class="linkable">leveldb_options_create</span>() {<br/></li>
<li>&nbsp; <span class="Statement">return</span> <span class="Statement">new</span> <a href="#L52" title="db/c.cc:52">leveldb_options_t</a>;<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><a id="L390">&#x200c;</a><span class="Type">void</span> <span class="linkable">leveldb_options_destroy</span>(<a href="#L52" title="db/c.cc:52">leveldb_options_t</a>* options) {<br/></li>
<li>&nbsp; <span class="Statement">delete</span> options;<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><a id="L394">&#x200c;</a><span class="Type">void</span> <span class="linkable">leveldb_options_set_comparator</span>(<br/></li>
<li>&nbsp; &nbsp; <a href="#L52" title="db/c.cc:52">leveldb_options_t</a>* opt,<br/></li>
<li>&nbsp; &nbsp; <a href="#L60" title="db/c.cc:60">leveldb_comparator_t</a>* cmp) {<br/></li>
<li>&nbsp; opt-&gt;rep.comparator = cmp;<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><a id="L400">&#x200c;</a><span class="Type">void</span> <span class="linkable">leveldb_options_set_filter_policy</span>(<br/></li>
<li>&nbsp; &nbsp; <a href="#L52" title="db/c.cc:52">leveldb_options_t</a>* opt,<br/></li>
<li>&nbsp; &nbsp; <a href="#L86" title="db/c.cc:86">leveldb_filterpolicy_t</a>* policy) {<br/></li>
<li>&nbsp; opt-&gt;rep.filter_policy = policy;<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><a id="L406">&#x200c;</a><span class="Type">void</span> <span class="linkable">leveldb_options_set_create_if_missing</span>(<br/></li>
<li>&nbsp; &nbsp; <a href="#L52" title="db/c.cc:52">leveldb_options_t</a>* opt, <span class="Type">unsigned</span> <span class="Type">char</span> v) {<br/></li>
<li>&nbsp; opt-&gt;rep.create_if_missing = v;<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><a id="L411">&#x200c;</a><span class="Type">void</span> <span class="linkable">leveldb_options_set_error_if_exists</span>(<br/></li>
<li>&nbsp; &nbsp; <a href="#L52" title="db/c.cc:52">leveldb_options_t</a>* opt, <span class="Type">unsigned</span> <span class="Type">char</span> v) {<br/></li>
<li>&nbsp; opt-&gt;rep.error_if_exists = v;<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><a id="L416">&#x200c;</a><span class="Type">void</span> <span class="linkable">leveldb_options_set_paranoid_checks</span>(<br/></li>
<li>&nbsp; &nbsp; <a href="#L52" title="db/c.cc:52">leveldb_options_t</a>* opt, <span class="Type">unsigned</span> <span class="Type">char</span> v) {<br/></li>
<li>&nbsp; opt-&gt;rep.paranoid_checks = v;<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><a id="L421">&#x200c;</a><span class="Type">void</span> <span class="linkable">leveldb_options_set_env</span>(<a href="#L52" title="db/c.cc:52">leveldb_options_t</a>* opt, <a href="#L127" title="db/c.cc:127">leveldb_env_t</a>* env) {<br/></li>
<li>&nbsp; opt-&gt;rep.env = (env ? env-&gt;rep : <span class="Constant">NULL</span>);<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><a id="L425">&#x200c;</a><span class="Type">void</span> <span class="linkable">leveldb_options_set_info_log</span>(<a href="#L52" title="db/c.cc:52">leveldb_options_t</a>* opt, <a href="#L57" title="db/c.cc:57">leveldb_logger_t</a>* l) {<br/></li>
<li>&nbsp; opt-&gt;rep.info_log = (l ? l-&gt;rep : <span class="Constant">NULL</span>);<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><a id="L429">&#x200c;</a><span class="Type">void</span> <span class="linkable">leveldb_options_set_write_buffer_size</span>(<a href="#L52" title="db/c.cc:52">leveldb_options_t</a>* opt, <span class="Type">size_t</span> s) {<br/></li>
<li>&nbsp; opt-&gt;rep.write_buffer_size = s;<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><a id="L433">&#x200c;</a><span class="Type">void</span> <span class="linkable">leveldb_options_set_max_open_files</span>(<a href="#L52" title="db/c.cc:52">leveldb_options_t</a>* opt, <span class="Type">int</span> n) {<br/></li>
<li>&nbsp; opt-&gt;rep.max_open_files = n;<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><a id="L437">&#x200c;</a><span class="Type">void</span> <span class="linkable">leveldb_options_set_cache</span>(<a href="#L52" title="db/c.cc:52">leveldb_options_t</a>* opt, <a href="#L53" title="db/c.cc:53">leveldb_cache_t</a>* c) {<br/></li>
<li>&nbsp; opt-&gt;rep.block_cache = c-&gt;rep;<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><a id="L441">&#x200c;</a><span class="Type">void</span> <span class="linkable">leveldb_options_set_block_size</span>(<a href="#L52" title="db/c.cc:52">leveldb_options_t</a>* opt, <span class="Type">size_t</span> s) {<br/></li>
<li>&nbsp; opt-&gt;rep.block_size = s;<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><a id="L445">&#x200c;</a><span class="Type">void</span> <span class="linkable">leveldb_options_set_block_restart_interval</span>(<a href="#L52" title="db/c.cc:52">leveldb_options_t</a>* opt, <span class="Type">int</span> n) {<br/></li>
<li>&nbsp; opt-&gt;rep.block_restart_interval = n;<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><a id="L449">&#x200c;</a><span class="Type">void</span> <span class="linkable">leveldb_options_set_compression</span>(<a href="#L52" title="db/c.cc:52">leveldb_options_t</a>* opt, <span class="Type">int</span> t) {<br/></li>
<li>&nbsp; opt-&gt;rep.compression = <span class="Statement">static_cast</span>&lt;<a href="../include/leveldb/options.h.html#L23" title="include/leveldb/options.h:23">CompressionType</a>&gt;(t);<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><a id="L453">&#x200c;</a><a href="#L60" title="db/c.cc:60">leveldb_comparator_t</a>* <span class="linkable">leveldb_comparator_create</span>(<br/></li>
<li>&nbsp; &nbsp; <span class="Type">void</span>* state,<br/></li>
<li>&nbsp; &nbsp; <span class="Type">void</span> (*destructor)(<span class="Type">void</span>*),<br/></li>
<li>&nbsp; &nbsp; <span class="Type">int</span> (*<a href="../include/leveldb/slice.h.html#L96" title="include/leveldb/slice.h:96">compare</a>)(<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Type">void</span>*,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Type">const</span> <span class="Type">char</span>* a, <span class="Type">size_t</span> alen,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Type">const</span> <span class="Type">char</span>* b, <span class="Type">size_t</span> blen),<br/></li>
<li>&nbsp; &nbsp; <span class="Type">const</span> <span class="Type">char</span>* (*name)(<span class="Type">void</span>*)) {<br/></li>
<li>&nbsp; <a href="#L60" title="db/c.cc:60">leveldb_comparator_t</a>* result = <span class="Statement">new</span> <a href="#L60" title="db/c.cc:60">leveldb_comparator_t</a>;<br/></li>
<li>&nbsp; result-&gt;state_ = state;<br/></li>
<li>&nbsp; result-&gt;destructor_ = destructor;<br/></li>
<li>&nbsp; result-&gt;compare_ = <a href="../include/leveldb/slice.h.html#L96" title="include/leveldb/slice.h:96">compare</a>;<br/></li>
<li>&nbsp; result-&gt;name_ = name;<br/></li>
<li>&nbsp; <span class="Statement">return</span> result;<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><a id="L469">&#x200c;</a><span class="Type">void</span> <span class="linkable">leveldb_comparator_destroy</span>(<a href="#L60" title="db/c.cc:60">leveldb_comparator_t</a>* cmp) {<br/></li>
<li>&nbsp; <span class="Statement">delete</span> cmp;<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><a id="L473">&#x200c;</a><a href="#L86" title="db/c.cc:86">leveldb_filterpolicy_t</a>* <span class="linkable">leveldb_filterpolicy_create</span>(<br/></li>
<li>&nbsp; &nbsp; <span class="Type">void</span>* state,<br/></li>
<li>&nbsp; &nbsp; <span class="Type">void</span> (*destructor)(<span class="Type">void</span>*),<br/></li>
<li>&nbsp; &nbsp; <span class="Type">char</span>* (*create_filter)(<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Type">void</span>*,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Type">const</span> <span class="Type">char</span>* <span class="Type">const</span>* key_array, <span class="Type">const</span> <span class="Type">size_t</span>* key_length_array,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Type">int</span> num_keys,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Type">size_t</span>* filter_length),<br/></li>
<li>&nbsp; &nbsp; <span class="Type">unsigned</span> <span class="Type">char</span> (*key_may_match)(<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Type">void</span>*,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Type">const</span> <span class="Type">char</span>* <a href="../table/two_level_iterator.cc.html#L37" title="table/two_level_iterator.cc:37">key</a>, <span class="Type">size_t</span> length,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Type">const</span> <span class="Type">char</span>* filter, <span class="Type">size_t</span> filter_length),<br/></li>
<li>&nbsp; &nbsp; <span class="Type">const</span> <span class="Type">char</span>* (*name)(<span class="Type">void</span>*)) {<br/></li>
<li>&nbsp; <a href="#L86" title="db/c.cc:86">leveldb_filterpolicy_t</a>* result = <span class="Statement">new</span> <a href="#L86" title="db/c.cc:86">leveldb_filterpolicy_t</a>;<br/></li>
<li>&nbsp; result-&gt;state_ = state;<br/></li>
<li>&nbsp; result-&gt;destructor_ = destructor;<br/></li>
<li>&nbsp; result-&gt;create_ = create_filter;<br/></li>
<li>&nbsp; result-&gt;key_match_ = key_may_match;<br/></li>
<li>&nbsp; result-&gt;name_ = name;<br/></li>
<li>&nbsp; <span class="Statement">return</span> result;<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><a id="L495">&#x200c;</a><span class="Type">void</span> <span class="linkable">leveldb_filterpolicy_destroy</span>(<a href="#L86" title="db/c.cc:86">leveldb_filterpolicy_t</a>* filter) {<br/></li>
<li>&nbsp; <span class="Statement">delete</span> filter;<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><a id="L499">&#x200c;</a><a href="#L86" title="db/c.cc:86">leveldb_filterpolicy_t</a>* <span class="linkable">leveldb_filterpolicy_create_bloom</span>(<span class="Type">int</span> bits_per_key) {<br/></li>
<li>&nbsp; <span class="Comment">// Make a <a href="#L86" title="db/c.cc:86">leveldb_filterpolicy_t</a>, but override all of its methods so<br/></li>
<li></span>&nbsp; <span class="Comment">// they delegate to a <a href="../util/bloom.cc.html#L91" title="util/bloom.cc:91">NewBloomFilterPolicy</a>() instead of user<br/></li>
<li></span>&nbsp; <span class="Comment">// supplied C functions.<br/></li>
<li></span>&nbsp; <span class="Type">struct</span> Wrapper : <span class="Statement">public</span> <a href="#L86" title="db/c.cc:86">leveldb_filterpolicy_t</a> {<br/></li>
<li>&nbsp; &nbsp; <span class="Type">const</span> FilterPolicy* rep_;<br/></li>
<li>&nbsp; &nbsp; ~Wrapper() { <span class="Statement">delete</span> rep_; }<br/></li>
<li>&nbsp; &nbsp; <span class="Type">const</span> <span class="Type">char</span>* <a href="../table/table_test.cc.html#L40" title="table/table_test.cc:40">Name</a>() <span class="Type">const</span> { <span class="Statement">return</span> rep_-&gt;<a href="../table/table_test.cc.html#L40" title="table/table_test.cc:40">Name</a>(); }<br/></li>
<li>&nbsp; &nbsp; <span class="Type">void</span> <a href="../table/filter_block_test.cc.html#L23" title="table/filter_block_test.cc:23">CreateFilter</a>(<span class="Type">const</span> <a href="../include/leveldb/slice.h.html#L28" title="include/leveldb/slice.h:28">Slice</a>* keys, <span class="Type">int</span> n, std::string* dst) <span class="Type">const</span> {<br/></li>
<li>&nbsp; &nbsp; &nbsp; <span class="Statement">return</span> rep_-&gt;<a href="../table/filter_block_test.cc.html#L23" title="table/filter_block_test.cc:23">CreateFilter</a>(keys, n, dst);<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li>&nbsp; &nbsp; <span class="Type">bool</span> <a href="../table/filter_block_test.cc.html#L30" title="table/filter_block_test.cc:30">KeyMayMatch</a>(<span class="Type">const</span> <a href="../include/leveldb/slice.h.html#L28" title="include/leveldb/slice.h:28">Slice</a>&amp; <a href="../table/two_level_iterator.cc.html#L37" title="table/two_level_iterator.cc:37">key</a>, <span class="Type">const</span> <a href="../include/leveldb/slice.h.html#L28" title="include/leveldb/slice.h:28">Slice</a>&amp; filter) <span class="Type">const</span> {<br/></li>
<li>&nbsp; &nbsp; &nbsp; <span class="Statement">return</span> rep_-&gt;<a href="../table/filter_block_test.cc.html#L30" title="table/filter_block_test.cc:30">KeyMayMatch</a>(<a href="../table/two_level_iterator.cc.html#L37" title="table/two_level_iterator.cc:37">key</a>, filter);<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li>&nbsp; &nbsp; <span class="Type">static</span> <span class="Type">void</span> DoNothing(<span class="Type">void</span>*) { }<br/></li>
<li>&nbsp; };<br/></li>
<li>&nbsp; Wrapper* wrapper = <span class="Statement">new</span> Wrapper;<br/></li>
<li>&nbsp; wrapper-&gt;rep_ = <a href="../util/bloom.cc.html#L91" title="util/bloom.cc:91">NewBloomFilterPolicy</a>(bits_per_key);<br/></li>
<li>&nbsp; wrapper-&gt;state_ = <span class="Constant">NULL</span>;<br/></li>
<li>&nbsp; wrapper-&gt;destructor_ = &amp;Wrapper::DoNothing;<br/></li>
<li>&nbsp; <span class="Statement">return</span> wrapper;<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><a id="L522">&#x200c;</a><a href="#L50" title="db/c.cc:50">leveldb_readoptions_t</a>* <span class="linkable">leveldb_readoptions_create</span>() {<br/></li>
<li>&nbsp; <span class="Statement">return</span> <span class="Statement">new</span> <a href="#L50" title="db/c.cc:50">leveldb_readoptions_t</a>;<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><a id="L526">&#x200c;</a><span class="Type">void</span> <span class="linkable">leveldb_readoptions_destroy</span>(<a href="#L50" title="db/c.cc:50">leveldb_readoptions_t</a>* opt) {<br/></li>
<li>&nbsp; <span class="Statement">delete</span> opt;<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><a id="L530">&#x200c;</a><span class="Type">void</span> <span class="linkable">leveldb_readoptions_set_verify_checksums</span>(<br/></li>
<li>&nbsp; &nbsp; <a href="#L50" title="db/c.cc:50">leveldb_readoptions_t</a>* opt,<br/></li>
<li>&nbsp; &nbsp; <span class="Type">unsigned</span> <span class="Type">char</span> v) {<br/></li>
<li>&nbsp; opt-&gt;rep.verify_checksums = v;<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><a id="L536">&#x200c;</a><span class="Type">void</span> <span class="linkable">leveldb_readoptions_set_fill_cache</span>(<br/></li>
<li>&nbsp; &nbsp; <a href="#L50" title="db/c.cc:50">leveldb_readoptions_t</a>* opt, <span class="Type">unsigned</span> <span class="Type">char</span> v) {<br/></li>
<li>&nbsp; opt-&gt;rep.fill_cache = v;<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><a id="L541">&#x200c;</a><span class="Type">void</span> <span class="linkable">leveldb_readoptions_set_snapshot</span>(<br/></li>
<li>&nbsp; &nbsp; <a href="#L50" title="db/c.cc:50">leveldb_readoptions_t</a>* opt,<br/></li>
<li>&nbsp; &nbsp; <span class="Type">const</span> <a href="#L49" title="db/c.cc:49">leveldb_snapshot_t</a>* snap) {<br/></li>
<li>&nbsp; opt-&gt;rep.snapshot = (snap ? snap-&gt;rep : <span class="Constant">NULL</span>);<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><a id="L547">&#x200c;</a><a href="#L51" title="db/c.cc:51">leveldb_writeoptions_t</a>* <span class="linkable">leveldb_writeoptions_create</span>() {<br/></li>
<li>&nbsp; <span class="Statement">return</span> <span class="Statement">new</span> <a href="#L51" title="db/c.cc:51">leveldb_writeoptions_t</a>;<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><a id="L551">&#x200c;</a><span class="Type">void</span> <span class="linkable">leveldb_writeoptions_destroy</span>(<a href="#L51" title="db/c.cc:51">leveldb_writeoptions_t</a>* opt) {<br/></li>
<li>&nbsp; <span class="Statement">delete</span> opt;<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><a id="L555">&#x200c;</a><span class="Type">void</span> <span class="linkable">leveldb_writeoptions_set_sync</span>(<br/></li>
<li>&nbsp; &nbsp; <a href="#L51" title="db/c.cc:51">leveldb_writeoptions_t</a>* opt, <span class="Type">unsigned</span> <span class="Type">char</span> v) {<br/></li>
<li>&nbsp; opt-&gt;rep.sync = v;<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><a id="L560">&#x200c;</a><a href="#L53" title="db/c.cc:53">leveldb_cache_t</a>* <span class="linkable">leveldb_cache_create_lru</span>(<span class="Type">size_t</span> capacity) {<br/></li>
<li>&nbsp; <a href="#L53" title="db/c.cc:53">leveldb_cache_t</a>* c = <span class="Statement">new</span> <a href="#L53" title="db/c.cc:53">leveldb_cache_t</a>;<br/></li>
<li>&nbsp; c-&gt;rep = <a href="../util/cache.cc.html#L321" title="util/cache.cc:321">NewLRUCache</a>(capacity);<br/></li>
<li>&nbsp; <span class="Statement">return</span> c;<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><a id="L566">&#x200c;</a><span class="Type">void</span> <span class="linkable">leveldb_cache_destroy</span>(<a href="#L53" title="db/c.cc:53">leveldb_cache_t</a>* cache) {<br/></li>
<li>&nbsp; <span class="Statement">delete</span> cache-&gt;rep;<br/></li>
<li>&nbsp; <span class="Statement">delete</span> cache;<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><a id="L571">&#x200c;</a><a href="#L127" title="db/c.cc:127">leveldb_env_t</a>* <span class="linkable">leveldb_create_default_env</span>() {<br/></li>
<li>&nbsp; <a href="#L127" title="db/c.cc:127">leveldb_env_t</a>* result = <span class="Statement">new</span> <a href="#L127" title="db/c.cc:127">leveldb_env_t</a>;<br/></li>
<li>&nbsp; result-&gt;rep = <a href="../include/leveldb/env.h.html#L33" title="include/leveldb/env.h:33">Env</a>::<a href="../util/env_posix.cc.html#L600" title="util/env_posix.cc:600">Default</a>();<br/></li>
<li>&nbsp; result-&gt;is_default = <span class="Constant">true</span>;<br/></li>
<li>&nbsp; <span class="Statement">return</span> result;<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><a id="L578">&#x200c;</a><span class="Type">void</span> <span class="linkable">leveldb_env_destroy</span>(<a href="#L127" title="db/c.cc:127">leveldb_env_t</a>* env) {<br/></li>
<li>&nbsp; <span class="Statement">if</span> (!env-&gt;is_default) <span class="Statement">delete</span> env-&gt;rep;<br/></li>
<li>&nbsp; <span class="Statement">delete</span> env;<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><a id="L583">&#x200c;</a><span class="Type">void</span> <span class="linkable">leveldb_free</span>(<span class="Type">void</span>* ptr) {<br/></li>
<li>&nbsp; free(ptr);<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><a id="L587">&#x200c;</a><span class="Type">int</span> <span class="linkable">leveldb_major_version</span>() {<br/></li>
<li>&nbsp; <span class="Statement">return</span> kMajorVersion;<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><a id="L591">&#x200c;</a><span class="Type">int</span> <span class="linkable">leveldb_minor_version</span>() {<br/></li>
<li>&nbsp; <span class="Statement">return</span> kMinorVersion;<br/></li>
<li>}<br/></li>
<li><br/></li>
<li>}&nbsp; <span class="Comment">// end extern &quot;C&quot;<br/></li>
</ol></span></code>
 </body>
</html>
