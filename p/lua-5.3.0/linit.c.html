<!-- generated by the src2html.pl tool from code2ebook:
  https://github.com/agentzh/code2ebook
-->

<html>
 <head>
  <title>linit.c - src</title>
  <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
  <style>
body {
    text-align: left;
    text-align-last: left;
}

code {
    font-family: consolas, monospace;
}

span.Constant {
    color: DarkGreen;
}

span.Special {
    color: #c06000;
}

span.Comment {
    color: DarkRed;
    font-style: italic;
}

span.Identifier {
    color: DarkCyan;
}

span.PreProc {
    color: DarkMagenta;
}

span.Statement, span.Type, span.Keyword, span.Repeat, span.Conditional,
    span.Operator, span.Exception
{
    color: DarkBlue;
}

span.Todo {
    color: DarkRed;
    background-color: Gold;
    font-style: italic;
}

span.Underlined {
    text-decoration: underline;
}

span.linkable {
    font-weight: bold;
}

code ol {
    counter-reset: item;
    list-style-type: none;
    margin-left: 0;
    padding-left: 0;
    list-style-position: inside;
}

code li {
    display: block;
}

code li:before {
    content: counter(item) "  ";
    counter-increment: item;
    color: #999;
    padding-right: 0.5em;
    padding-left: 0.4em;
    list-style-position: inside;
    text-align: right
}

  </style>
 </head>
 <body>
  <h3>linit.c - src</h3>
   <a href="../index.html"> Table of Contents </a>
 <h4>Global variables defined</h4>
 <ul>
<li><a href="#L42">loadedlibs</a></li>
</ul>
 <h4>Functions defined</h4>
 <ul>
<li><a href="#L60">luaL_openlibs</a></li>
</ul>
 <h4>Macros defined</h4>
 <ul>
<li><a href="#L9">LUA_LIB</a></li>
<li><a href="#L8">linit_c</a></li>
</ul>
 <h4>Source code</h4>

  <code><ol><li><span class="Comment">/*<br/></li>
<li></span><span class="Comment">** $Id: linit.c,v 1.38 2015/01/05 13:48:33 roberto Exp $<br/></li>
<li></span><span class="Comment">** Initialization of libraries for lua.c and other clients<br/></li>
<li></span><span class="Comment">** See Copyright Notice in lua.h<br/></li>
<li></span><span class="Comment">*/<br/></li>
<li></span><br/></li>
<li><br/></li>
<li><a id="L8">&#x200c;</a><span class="PreProc">#define <span class="linkable">linit_c</span><br/></li>
<li><a id="L9">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">LUA_LIB</span><br/></li>
<li></span><br/></li>
<li><span class="Comment">/*<br/></li>
<li></span><span class="Comment">** If you embed Lua in your program and need to open the standard<br/></li>
<li></span><span class="Comment">** libraries, call <a href="#L60" title="linit.c:60">luaL_openlibs</a> in your program. If you need a<br/></li>
<li></span><span class="Comment">** different set of libraries, copy this file to your project and edit<br/></li>
<li></span><span class="Comment">** it to suit your needs.<br/></li>
<li></span><span class="Comment">**<br/></li>
<li></span><span class="Comment">** You can also *preload* libraries, so that a later 'require' can<br/></li>
<li></span><span class="Comment">** open the library, which is already linked to the application.<br/></li>
<li></span><span class="Comment">** For that, do the following code:<br/></li>
<li></span><span class="Comment">**<br/></li>
<li></span><span class="Comment">**&nbsp; <a href="lauxlib.c.html#L880" title="lauxlib.c:880">luaL_getsubtable</a>(L, <a href="lua.h.html#L40" title="lua.h:40">LUA_REGISTRYINDEX</a>, &quot;_PRELOAD&quot;);<br/></li>
<li></span><span class="Comment">**&nbsp; <a href="lua.h.html#L348" title="lua.h:348">lua_pushcfunction</a>(L, luaopen_modname);<br/></li>
<li></span><span class="Comment">**&nbsp; <a href="lapi.c.html#L745" title="lapi.c:745">lua_setfield</a>(L, -2, modname);<br/></li>
<li></span><span class="Comment">**&nbsp; <a href="lua.h.html#L342" title="lua.h:342">lua_pop</a>(L, 1);&nbsp; // remove _PRELOAD table<br/></li>
<li></span><span class="Comment">*/<br/></li>
<li></span><br/></li>
<li><span class="PreProc">#include </span><span class="Constant">&quot;lprefix.h&quot;<br/></li>
<li></span><br/></li>
<li><br/></li>
<li><span class="PreProc">#include </span><span class="Constant">&lt;stddef.h&gt;<br/></li>
<li></span><br/></li>
<li><span class="PreProc">#include </span><span class="Constant">&quot;lua.h&quot;<br/></li>
<li></span><br/></li>
<li><span class="PreProc">#include </span><span class="Constant">&quot;lualib.h&quot;<br/></li>
<li></span><span class="PreProc">#include </span><span class="Constant">&quot;lauxlib.h&quot;<br/></li>
<li></span><br/></li>
<li><br/></li>
<li><span class="Comment">/*<br/></li>
<li></span><span class="Comment">** these libs are loaded by lua.c and are readily available to any Lua<br/></li>
<li></span><span class="Comment">** program<br/></li>
<li></span><span class="Comment">*/<br/></li>
<li><a id="L42">&#x200c;</a></span><span class="Type">static</span> <span class="Type">const</span> <a href="lauxlib.h.html#L23" title="lauxlib.h:23">luaL_Reg</a> <span class="linkable">loadedlibs</span>[] = {<br/></li>
<li>&nbsp; {<span class="Constant">&quot;_G&quot;</span>, <a href="lbaselib.c.html#L502" title="lbaselib.c:502">luaopen_base</a>},<br/></li>
<li>&nbsp; {<a href="lualib.h.html#L44" title="lualib.h:44">LUA_LOADLIBNAME</a>, <a href="loadlib.c.html#L762" title="loadlib.c:762">luaopen_package</a>},<br/></li>
<li>&nbsp; {<a href="lualib.h.html#L17" title="lualib.h:17">LUA_COLIBNAME</a>, <a href="lcorolib.c.html#L164" title="lcorolib.c:164">luaopen_coroutine</a>},<br/></li>
<li>&nbsp; {<a href="lualib.h.html#L20" title="lualib.h:20">LUA_TABLIBNAME</a>, <a href="ltablib.c.html#L348" title="ltablib.c:348">luaopen_table</a>},<br/></li>
<li>&nbsp; {<a href="lualib.h.html#L23" title="lualib.h:23">LUA_IOLIBNAME</a>, <a href="liolib.c.html#L748" title="liolib.c:748">luaopen_io</a>},<br/></li>
<li>&nbsp; {<a href="lualib.h.html#L26" title="lualib.h:26">LUA_OSLIBNAME</a>, <a href="loslib.c.html#L352" title="loslib.c:352">luaopen_os</a>},<br/></li>
<li>&nbsp; {<a href="lualib.h.html#L29" title="lualib.h:29">LUA_STRLIBNAME</a>, <a href="lstrlib.c.html#L1425" title="lstrlib.c:1425">luaopen_string</a>},<br/></li>
<li>&nbsp; {<a href="lualib.h.html#L38" title="lualib.h:38">LUA_MATHLIBNAME</a>, <a href="lmathlib.c.html#L392" title="lmathlib.c:392">luaopen_math</a>},<br/></li>
<li>&nbsp; {<a href="lualib.h.html#L32" title="lualib.h:32">LUA_UTF8LIBNAME</a>, <a href="lutf8lib.c.html#L249" title="lutf8lib.c:249">luaopen_utf8</a>},<br/></li>
<li>&nbsp; {<a href="lualib.h.html#L41" title="lualib.h:41">LUA_DBLIBNAME</a>, <a href="ldblib.c.html#L433" title="ldblib.c:433">luaopen_debug</a>},<br/></li>
<li><span class="PreProc">#if defined(<a href="luaconf.h.html#L289" title="luaconf.h:289">LUA_COMPAT_BITLIB</a>)<br/></li>
<li></span>&nbsp; {<a href="lualib.h.html#L35" title="lualib.h:35">LUA_BITLIBNAME</a>, <a href="lbitlib.c.html#L217" title="lbitlib.c:217">luaopen_bit32</a>},<br/></li>
<li><span class="PreProc">#endif<br/></li>
<li></span>&nbsp; {<span class="Constant">NULL</span>, <span class="Constant">NULL</span>}<br/></li>
<li>};<br/></li>
<li><br/></li>
<li><br/></li>
<li><a id="L60">&#x200c;</a><a href="luaconf.h.html#L235" title="luaconf.h:235">LUALIB_API</a> <span class="Type">void</span> <span class="linkable">luaL_openlibs</span> (<a href="lstate.h.html#L149" title="lstate.h:149">lua_State</a> *L) {<br/></li>
<li>&nbsp; <span class="Type">const</span> <a href="lauxlib.h.html#L23" title="lauxlib.h:23">luaL_Reg</a> *lib;<br/></li>
<li>&nbsp; <span class="Comment">/* &quot;require&quot; functions from '<a href="#L42" title="linit.c:42">loadedlibs</a>' and set results to global table */<br/></li>
<li></span>&nbsp; <span class="Statement">for</span> (lib = <a href="#L42" title="linit.c:42">loadedlibs</a>; lib-&gt;func; lib++) {<br/></li>
<li>&nbsp; &nbsp; <a href="lauxlib.c.html#L900" title="lauxlib.c:900">luaL_requiref</a>(L, lib-&gt;name, lib-&gt;func, <span class="Constant">1</span>);<br/></li>
<li>&nbsp; &nbsp; <a href="lua.h.html#L342" title="lua.h:342">lua_pop</a>(L, <span class="Constant">1</span>);&nbsp; <span class="Comment">/* remove lib */<br/></li>
<li></span>&nbsp; }<br/></li>
<li>}<br/></li>
<li><br/></li>
</ol></code>
 </body>
</html>
